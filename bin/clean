#!/usr/bin/env python3
import click
import git
import os
import subprocess

allowed_hidden_files = set([
    ".bashrc",
    ".cache",
    ".config",
    ".gnupg",
    ".local",
    ".mozilla",
    ".pki",
    ".ssh",
    ".vim",
])

home = os.path.expanduser("~")
hidden_files = [f.name for f in os.scandir(home) if f.name[0] == '.']
extra_files = set(hidden_files) - allowed_hidden_files

if extra_files:
    print("Extra files found:")
    for f in sorted(extra_files):
        print("\t" + f)
else:
    print("No extra files found in ~")

print("\n~/Code\n")
subprocess.run(['git', '-C', os.path.expanduser('~/Code'), 'status'])

print("\n~/.config/dotfiles\n")
subprocess.run(['git', '-C', os.path.expanduser("~/.config/dotfiles"), 'status'])
